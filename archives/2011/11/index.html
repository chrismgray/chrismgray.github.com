<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>11</title>

<link rel="stylesheet" href="../../../style.css" type="text/css" />

<link rel="stylesheet" href="../../../local.css" type="text/css" />





<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  html { font-family: Times, serif; font-size: 12pt; }
  .title  { text-align: center; }
  .todo   { color: red; }
  .done   { color: green; }
  .tag    { background-color: #add8e6; font-weight:normal }
  .target { }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  {margin-left:auto; margin-right:0px;  text-align:right;}
  .left   {margin-left:0px;  margin-right:auto; text-align:left;}
  .center {margin-left:auto; margin-right:auto; text-align:center;}
  p.verse { margin-left: 3% }
  pre {
	border: 1pt solid #AEBDCC;
	background-color: #F3F5F7;
	padding: 5pt;
	font-family: courier, monospace;
        font-size: 90%;
        overflow:auto;
  }
  table { border-collapse: collapse; }
  td, th { vertical-align: top;  }
  th.right  { text-align:center;  }
  th.left   { text-align:center;   }
  th.center { text-align:center; }
  td.right  { text-align:right;  }
  td.left   { text-align:left;   }
  td.center { text-align:center; }
  dt { font-weight: bold; }
  div.figure { padding: 0.5em; }
  div.figure p { text-align: center; }
  textarea { overflow-x: auto; }
  .linenr { font-size:smaller }
  .code-highlighted {background-color:#ffff00;}
  .org-info-js_info-navigation { border-style:none; }
  #org-info-js_console-label { font-size:10px; font-weight:bold;
                               white-space:nowrap; }
  .org-info-js_search-highlight {background-color:#ffff00; color:#000000;
                                 font-weight:bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/javascript" src="http://orgmode.org/mathjax/MathJax.js">
<!--/*--><![CDATA[/*><!--*/
    MathJax.Hub.Config({
        // Only one of the two following lines, depending on user settings
        // First allows browser-native MathML display, second forces HTML/CSS
        //  config: ["MMLorHTML.js"], jax: ["input/TeX"],
            jax: ["input/TeX", "output/HTML-CSS"],
        extensions: ["tex2jax.js","TeX/AMSmath.js","TeX/AMSsymbols.js",
                     "TeX/noUndefined.js"],
        tex2jax: {
            inlineMath: [ ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"], ["\\begin{displaymath}","\\end{displaymath}"] ],
            skipTags: ["script","noscript","style","textarea","pre","code"],
            ignoreClass: "tex2jax_ignore",
            processEscapes: false,
            processEnvironments: true,
            preview: "TeX"
        },
        showProcessingMessages: true,
        displayAlign: "center",
        displayIndent: "2em",

        "HTML-CSS": {
             scale: 100,
             availableFonts: ["STIX","TeX"],
             preferredFont: "TeX",
             webFont: "TeX",
             imageFont: "TeX",
             showMathMenu: true,
        },
        MMLorHTML: {
             prefer: {
                 MSIE:    "MML",
                 Firefox: "MML",
                 Opera:   "HTML",
                 other:   "HTML"
             }
        }
    });
/*]]>*///-->
</script>
</head>
<body>

<div class="page">

<div class="pageheader">
<div class="header">
<span>
<span class="parentlinks">

<a href="../../../">Hiking and Coding</a>/ 

<a href="../../">archives</a>/ 

<a href="../">2011</a>/ 

</span>
<span class="title">
11

</span>
</span>

</div>


<div class="actions">
<ul>


<li><a href="../../../recentchanges/">RecentChanges</a></li>






<li>

<a href="">Comment</a>

</li>

</ul>
</div>




</div>


<div class="sidebar">
<div><div class="calendar"><table class="month-calendar">
    <tr>
    <th class="month-calendar-arrow"><a href="../10/" title="October">&larr;</a></th>
    <th class="month-calendar-head" colspan="5"><span class="selflink">Nov 2011</span></th>
    <th class="month-calendar-arrow"><a href="../12/" title="December">&rarr;</a></th>
    </tr>
    <tr>
        <th class="month-calendar-day-head Sunday" title="Sunday">S</th>
        <th class="month-calendar-day-head Monday" title="Monday">M</th>
        <th class="month-calendar-day-head Tuesday" title="Tuesday">T</th>
        <th class="month-calendar-day-head Wednesday" title="Wednesday">W</th>
        <th class="month-calendar-day-head Thursday" title="Thursday">T</th>
        <th class="month-calendar-day-head Friday" title="Friday">F</th>
        <th class="month-calendar-day-head Saturday" title="Saturday">S</th>
    </tr>
    <tr>
        <td class="month-calendar-day-noday Sunday">&nbsp;</td>
        <td class="month-calendar-day-noday Monday">&nbsp;</td>
        <td class="month-calendar-day-nolink Tuesday">1</td>
        <td class="month-calendar-day-nolink Wednesday">2</td>
        <td class="month-calendar-day-nolink Thursday">3</td>
        <td class="month-calendar-day-nolink Friday">4</td>
        <td class="month-calendar-day-nolink Saturday">5</td>
    </tr>
    <tr>
        <td class="month-calendar-day-nolink Sunday">6</td>
        <td class="month-calendar-day-nolink Monday">7</td>
        <td class="month-calendar-day-nolink Tuesday">8</td>
        <td class="month-calendar-day-link Wednesday"><a href="../../../posts/rationals-followup/" title="rationals-followup">9</a></td>
        <td class="month-calendar-day-link Thursday"><a href="../../../posts/more-rationals/" title="more-rationals">10</a></td>
        <td class="month-calendar-day-link Friday"><a href="../../../posts/cljs-name-resolving/" title="cljs-name-resolving">11</a></td>
        <td class="month-calendar-day-link Saturday"><a href="../../../posts/time-series-1/" title="time-series-1">12</a></td>
    </tr>
    <tr>
        <td class="month-calendar-day-link Sunday"><a href="../../../posts/time-series-2/interest-rates.png" title="interest-rates.png">13</a></td>
        <td class="month-calendar-day-link Monday"><a href="../../../posts/scattered/" title="scattered">14</a></td>
        <td class="month-calendar-day-link Tuesday"><a href="../../../posts/luhnybin/" title="luhnybin">15</a></td>
        <td class="month-calendar-day-link Wednesday"><a href="../../../posts/spot-tracks/" title="spot-tracks">16</a></td>
        <td class="month-calendar-day-nolink Thursday">17</td>
        <td class="month-calendar-day-nolink Friday">18</td>
        <td class="month-calendar-day-this-day Saturday"><a href="../../../posts/hiking/100-mile-wilderness/" title="100-mile-wilderness">19</a></td>
    </tr>
    <tr>
        <td class="month-calendar-day-future Sunday">20</td>
        <td class="month-calendar-day-nolink Monday">21</td>
        <td class="month-calendar-day-nolink Tuesday">22</td>
        <td class="month-calendar-day-nolink Wednesday">23</td>
        <td class="month-calendar-day-nolink Thursday">24</td>
        <td class="month-calendar-day-nolink Friday">25</td>
        <td class="month-calendar-day-nolink Saturday">26</td>
    </tr>
    <tr>
        <td class="month-calendar-day-nolink Sunday">27</td>
        <td class="month-calendar-day-nolink Monday">28</td>
        <td class="month-calendar-day-nolink Tuesday">29</td>
        <td class="month-calendar-day-nolink Wednesday">30</td>
        <td class="month-calendar-day-noday Thursday">&nbsp;</td>
        <td class="month-calendar-day-noday Friday">&nbsp;</td>
        <td class="month-calendar-day-noday Saturday">&nbsp;</td>
    </tr>
</table>
</div></div>

</div>


<div id="pagebody">

<div id="content">
<div class="inlinepage">

<div class="inlineheader">

<span class="header">

<a href="../../../posts/rationals-in-cljs/">rationals-in-cljs</a>

</span>
</div>

<div class="inlinecontent">
<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">Rationals in Clojurescript </h2>
<div class="outline-text-2" id="text-1">


<p>
Last night, I uploaded some code to compute the <a href="http://en.wikipedia.org/wiki/Voronoi_diagram">Voronoi Diagram</a> of a
set of points to <a href="https://github.com/chrismgray/voronoi-diagram/">github</a>.  This post is not directly about that code --
I'll write about that when it is completely working &ndash; but rather
about something that I noticed when I tried to convert the code to
<a href="https://github.com/clojure/clojurescript">Clojurescript</a>.
</p>
<p>
There are a few things that are known not to work in Clojurescript
that work in Clojure: I had to convert calls from <code>lazy-cat</code> to
<code>concat</code>, for example.  However, the one difference that really broke
things for me was the lack of support for rational arithmetic in
Clojurescript.
</p>
<p>
One major element of my algorithm is a test to determine whether a
given point is on a given line segment.  With integer coordinates for
the sites that determine the Voronoi Diagram and the bounding box,
everything about this test can be represented as a rational number.
Since Clojure gives you rational numbers by default, while
Clojurescript simply uses Javascript's arithmetic facilities, the test
works in Clojure but not in Clojurescript.
</p>
<p>
So what can be done about this?  Here are some options:
</p>
<ul>
<li id="sec-1-1">Use floats, but more smartly <br/>

<p>
     Probably the simplest option, here we would not test for <i>equality</i>,
     but for <i>almost equality</i>.  That is, if the distance between two
     points is a very small number (<i>e.g.</i> a millionth), and all of the
     input is integer, then the two points are probably the same.  This
     option is obviously not too satisfying from a theoretical
     standpoint, especially if the small number is hardcoded.  I am
     fairly sure that there has been research to determine what the exact
     value of the small number should be, but that would take the code
     out of the realm of simplicity.
</p>
</li>
</ul>
<ul>
<li id="sec-1-2">Implement rationals in Clojurescript <br/>

<p>
     I am not sure how possible this option is.  However, it is currently
     the most appealing to me.  Rational arithmetic is not so difficult
     to implement, especially in the limited use case that I need it for:
     I am pretty sure that I could get away with <code>/</code>, <code>*</code>, <code>+</code>, <code>-</code>, and
     the comparison operators.  These are currently implemented as
     <a href="https://github.com/clojure/clojurescript/blob/3c83c62d973b0153a9e28bea7beb73794fbf9065/src/clj/cljs/core.clj#L51">macros</a> in Clojurescript, which means that they take the
     Clojurescript code and change it Javascript code.  This allows
     the Clojurescript compiler to take the prefix syntax of
     Clojurescript and change it to the infix syntax of Javascript.
</p>
<p>
     If we were to redefine the operators to be functions, we might
     have a chance to run different code given different types of
     input.  The <code>defmulti</code> and <code>defmethod</code> macros seem perfect for
     this.  The major question is whether it is possible to shadow the
     names of the operators but use them nevertheless.  That is, will
     I be able to add <code>(:require-macros [clojure.core :as core])</code> to
     my namespace and then use, for example, <code>core/*</code>?
</p>
<p>
     The other downside, beyond the potential difficulties, is the
     fact that the generated Javascript will no longer be quite as
     pretty.  What used to be infix notation will be converted to
     function calls.  Additionally, there will be a fairly high
     penalty for doing arithmetic &ndash; three or four function calls per
     arithmetic operation (assuming the polymorphic solution I have in
     mind works) rather than the current single operation.
</p>
</li>
</ul>
</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">Conclusion </h2>
<div class="outline-text-2" id="text-2">


<p>
  I am going to try to implement the rationals in Clojurescript
  first.  At the very least, I will learn a bit more about how
  multimethods work in Clojure. 
</p>


</div>
</div>

</div>

<div class="inlinefooter">

<span class="pagedate">
Posted <span class="date">Wed Nov  9 10:13:06 2011</span>
</span>


<span class="tags">
Tags:

<a href="../../../tags/clojure/" rel="tag">clojure</a>

<a href="../../../tags/clojurescript/" rel="tag">clojurescript</a>

<a href="../../../tags/lab-notes/" rel="tag">lab-notes</a>

<a href="../../../tags/rationals/" rel="tag">rationals</a>

<a href="../../../tags/voronoi-diagram/" rel="tag">voronoi-diagram</a>

</span>








</div>

</div>
<div class="inlinepage">

<div class="inlineheader">

<span class="header">

<a href="../../../posts/rationals-followup/">rationals-followup</a>

</span>
</div>

<div class="inlinecontent">
<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">A small followup </h2>
<div class="outline-text-2" id="text-1">


<p>
  My previous post said that I would be using the macros defined in
  Clojurescript's <code>core.clj</code>.  It turns out that doesn't make a lot of
  sense.  I am using the functions defined in <code>core.cljs</code> instead.
</p>


</div>
</div>

</div>

<div class="inlinefooter">

<span class="pagedate">
Posted <span class="date">Wed Nov  9 15:03:16 2011</span>
</span>


<span class="tags">
Tags:

<a href="../../../tags/clojure/" rel="tag">clojure</a>

<a href="../../../tags/clojurescript/" rel="tag">clojurescript</a>

<a href="../../../tags/lab-notes/" rel="tag">lab-notes</a>

<a href="../../../tags/rationals/" rel="tag">rationals</a>

</span>








</div>

</div>
<div class="inlinepage">

<div class="inlineheader">

<span class="header">

<a href="../../../posts/more-rationals/">more-rationals</a>

</span>
</div>

<div class="inlinecontent">
<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">More about rationals </h2>
<div class="outline-text-2" id="text-1">


<p>
  While attempting to implement <a href="http://chrismgray.github.com/posts/rationals-in-cljs/">support for rationals</a> yesterday, I
  stumbled on what is (or at least, seems to me to be) a bug in the
  Clojure compiler itself.  That is, one can not refer to the function
  <code>/</code> in namespaces other than <code>clojure.core</code>.  Now, this is probably
  the first time that anyone has wanted to do this, so it's not
  surprising that no one had seen the bug before.  But what was
  surprising to me was that I could fix it fairly easily.  I submitted
  my patch, and I should be a real-life contributor to Clojure pretty
  soon.  As a person who doesn't see himself as a compiler guy, that's
  pretty exciting.
</p>
<p>
  The next problem that I'm having is that redefining the basic
  arithmetic operations does not seem to work properly in
  Clojurescript.  The compiled javascript is trying (at least as far
  as I can tell) to redefine <code>cljs.core/+</code> rather than <code>rationals/+</code>,
  for example.  This is the problem that I am going to try to solve
  today.  
</p>


</div>
</div>

</div>

<div class="inlinefooter">

<span class="pagedate">
Posted <span class="date">Thu Nov 10 09:55:06 2011</span>
</span>


<span class="tags">
Tags:

<a href="../../../tags/clojure/" rel="tag">clojure</a>

<a href="../../../tags/clojurescript/" rel="tag">clojurescript</a>

<a href="../../../tags/lab-notes/" rel="tag">lab-notes</a>

<a href="../../../tags/rationals/" rel="tag">rationals</a>

</span>








</div>

</div>
<div class="inlinepage">

<div class="inlineheader">

<span class="header">

<a href="../../../posts/blogging-about-blogging/">blogging-about-blogging</a>

</span>
</div>

<div class="inlinecontent">
<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">A new system </h2>
<div class="outline-text-2" id="text-1">


<p>
  This is the obligatory post about how the new blogging system
  works.  Isn't that exciting?
</p>
<p>
  By my standards, this is a fairly simple system.  It is based on
  <a href="http://ikiwiki.info">ikiwiki</a>, which allows me to use <a href="http://orgmode">org-mode</a> to edit my posts and <a href="http://git-scm.com">git</a> as
  the version control system.  Since I already know those tools, I
  don't have to think about them and can just focus on writing.
</p>
<p>
  I'm less comfortable with making web pages look nice, but I took the
  CSS file from <a href="https://github.com/AntPortal/ikiwiked/raw/master/theme/gray-orange/local.css">the nice people at antportal.com</a> and added my own
  panoramic photo that I took while hiking.  I think the output is
  simple and looks pretty good.
</p>
<p>
  Finally, I am currently hosting the pages on <a href="http://github.com">github</a>.
</p>
</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">What I intend to write about </h2>
<div class="outline-text-2" id="text-2">


<p>
  The blog is currently called "Hiking and Coding".  So far I've only
  written about the latter, but I'm planning some posts about the
  former.  My current objective is to write once a day as a way to
  solidify what I'm thinking about for the day, so my posts will
  likely be about what I'm working on.  As such, expect them to be
  really boring.  I'm okay with that.  I'm also okay with you not
  subscribing.
</p>
<p>
  I will try to write about adventures I had while hiking on days that
  I'm not really working on anything.  Those posts will be tagged with
  the hiking tag.  They might be more exciting (though they might
  not).
</p>


</div>
</div>

</div>

<div class="inlinefooter">

<span class="pagedate">
Posted <span class="date">Thu Nov 10 19:13:21 2011</span>
</span>


<span class="tags">
Tags:

<a href="../../../tags/blogging/" rel="tag">blogging</a>

<a href="../../../tags/emacs/" rel="tag">emacs</a>

<a href="../../../tags/git/" rel="tag">git</a>

<a href="../../../tags/hiking/" rel="tag">hiking</a>

<a href="../../../tags/ikiwiki/" rel="tag">ikiwiki</a>

<a href="../../../tags/org-mode/" rel="tag">org-mode</a>

</span>








</div>

</div>
<div class="inlinepage">

<div class="inlineheader">

<span class="header">

<a href="../../../posts/cljs-name-resolving/">cljs-name-resolving</a>

</span>
</div>

<div class="inlinecontent">
<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">Resolving names as they are compiled in Clojurescript </h2>
<div class="outline-text-2" id="text-1">


<p>
  I think I found the bug in the Clojurescript compiler that I was
  <a href="http://chrismgray.github.com/more-rationals">looking for yesterday</a>.  Just to refresh the memory, when defining a
  function that has a function of the same name in <code>cljs.core</code>, the
  compiler will assume that you are trying to redefine the function
  from <code>cljs.core</code>, rather than the function in the namespace that you
  are actually in.  Since I am trying to redefine functions like <code>/</code>
  and <code>*</code>, this is a problem.
</p>
<p>
  Let's look at the evidence.  First, there's this:
</p>



<pre class="src src-clojure">(defmethod parse 'def
  [op env form name]
  (let [pfn (fn ([_ sym] {:sym sym})
              ([_ sym init] {:sym sym :init init})
              ([_ sym doc init] {:sym sym :doc doc :init init}))
        args (apply pfn form)
        sym (:sym args)]
    (assert (not (namespace sym)) <span>"Can't def ns-qualified name"</span>)
    (let [name (munge (:name (resolve-var (dissoc env :locals) sym)))
</pre>




<p>
  The important line there is the last: when defining a new name,
  <code>resolve-var</code> is called on the symbol.  Let's have a look at that
  function.  There is a <code>cond</code>, and when none of the tests return
  true, the following is done:
</p>



<pre class="src src-clojure">(munge (symbol (str
                (if (core-name? env sym)
                  'cljs.core
                  (-&gt; env :ns :name))
                <span>"."</span> (munge (name sym))))))]
</pre>




<p>
  This is seeing if the symbol name is in <code>cljs.core</code>, and if it is
  setting the namespace of the symbol to <code>cljs.core</code>.  Normally that
  would be correct &ndash; one doesn't want to need to <code>use</code> <code>cljs.core</code> in
  every file &ndash; but it doesn't allow for redefinition of functions
  that are in <code>cljs.core</code> (at least without completely shadowing
  them).
</p>
</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">What to do </h2>
<div class="outline-text-2" id="text-2">


<p>
  So what can we do about this?  The first thing that seems odd to me
  is that the symbol being defined is being resolved first.  Every
  symbol that is defined is defined within its own namespace, so there
  should be no need to resolve it.  That suggests that we should be
  able to take the part of <code>resolve-var</code> that doesn't have a special
  case for <code>cljs.core</code> and put it into the <code>parse</code> method.  Something
  like
</p>



<pre class="src src-clojure">(let [name (munge (:name (symbol (str (-&gt; env :ns :name) <span>"."</span> (munge (name sym))))))])
</pre>




<p>
  might work in the <code>parse</code> method.
</p>


</div>
</div>

</div>

<div class="inlinefooter">

<span class="pagedate">
Posted <span class="date">Fri Nov 11 07:23:38 2011</span>
</span>


<span class="tags">
Tags:

<a href="../../../tags/clojure/" rel="tag">clojure</a>

<a href="../../../tags/clojurescript/" rel="tag">clojurescript</a>

<a href="../../../tags/lab-notes/" rel="tag">lab-notes</a>

<a href="../../../tags/rationals/" rel="tag">rationals</a>

</span>








</div>

</div>
<div class="inlinepage">

<div class="inlineheader">

<span class="header">

<a href="../../../posts/cljs-name-resolving-2/">cljs-name-resolving-2</a>

</span>
</div>

<div class="inlinecontent">
<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">Done! </h2>
<div class="outline-text-2" id="text-1">


<p>
  I was close with my guess in the last post.  What ended up working
  was
</p>



<pre class="src src-clojure">(let [name (munge (symbol (str (-&gt; env :ns :name) <span>"."</span> (munge (str sym)))))
</pre>




<p>
  For some reason, <code>(name sym)</code> would crash the compiler from the
  <code>parse</code> method but it wouldn't from other functions caled from the
  <code>parse</code> method.  I finally gave up worrying about that and just used
  <code>(str sym)</code> instead, since that is guaranteed to be the same in this
  case &ndash; there is an <code>(assert (not (namespace sym)))</code> just before the
  <code>let</code> line.  I gave up on worrying about it, but someone who knows
  more about the compiler than me might want to try to figure out why
  it is.
</p>
<p>
  I also needed to allow names defined in <code>cljs.core</code> but redefined in
  another namespace to be called or referred to.  This involved
  changing the <code>resolve-existing-var</code> function.  Again, <code>cljs.core</code> is
  hardcoded:
</p>



<pre class="src src-clojure">(let [full-ns (if (and (core-name? env sym) (nil? (get-in @namespaces [(-&gt; env :ns :name) :defs sym])))
                'cljs.core
                (-&gt; env :ns :name))]
</pre>




<p>
  I added the second test: it simply asks whether the variable has
  been defined in the namespace.  If it hasn't, and the variable is
  defined in <code>cljs.core</code>, only then is the namespace set to
  <code>cljs.core</code>.
</p>
</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">Remove the macros </h2>
<div class="outline-text-2" id="text-2">


<p>
  It was also necessary to remove many of the macros from <code>core.clj</code>
  in order to redefine the functions that I needed to in my project.
  As I noted earlier, my project is to implement rationals in
  Clojurescript, so I need to redefine most of the functions that work
  with numbers.  (At least, that is the way I am implementing it --
  there may be a better way that I don't know about.)  Many of these
  functions were implemented twice: once as a macro in <code>core.clj</code> and
  once as a function in <code>core.cljs</code>.  I am obviously biased towards
  being able to redefine these functions, so I think the macros should
  be removed, but at least one of the implementations is redundant.
</p>



</div>
</div>

</div>

<div class="inlinefooter">

<span class="pagedate">
Posted <span class="date">Fri Nov 11 18:07:52 2011</span>
</span>


<span class="tags">
Tags:

<a href="../../../tags/clojure/" rel="tag">clojure</a>

<a href="../../../tags/clojurescript/" rel="tag">clojurescript</a>

<a href="../../../tags/lab-notes/" rel="tag">lab-notes</a>

<a href="../../../tags/rationals/" rel="tag">rationals</a>

</span>








</div>

</div>
<div class="inlinepage">

<div class="inlineheader">

<span class="header">

<a href="../../../posts/time-series-1/">time-series-1</a>

</span>
</div>

<div class="inlinecontent">
<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">Programming challenges </h2>
<div class="outline-text-2" id="text-1">


<p>
  One of the interesting aspects of looking for a job this time around
  is that most of the companies that I have applied at have asked me
  to do a programming challenge as a kind of weed-out step.  It has
  been fun and a good way of keeping in practice.  In fact, I have
  resolved to learn at least one new feature of the programming
  language that I am using for each one.
</p>
</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">Time series framework </h2>
<div class="outline-text-2" id="text-2">


<p>
  My latest programming challenge is to build a framework for <a href="http://en.wikipedia.org/wiki/Time_series">time series</a> generation.  The framework will take a function \(f\) that
  looks at the \(n\) previous timesteps and returns the next timestep.
  The other goals are:
</p><ul>
<li>Efficiency

<p>    
    Adding a new timestep should be a \(O(1)\) operation.
</p></li>
<li>Ease of debugging

<p>    
    If an error occurs in computing the next timestep, the stack trace
    should be easily comprehensible and show the current state of the
    time series.
</p></li>
<li>Traceability

<p>    
    It should be possible to see the differences between two different
    functions.  
</p></li>
</ul>


</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3">Ideas so far </h2>
<div class="outline-text-2" id="text-3">


<p>
  This seems like the perfect time to learn about <a href="http://onclojure.com/2009/03/05/a-monad-tutorial-for-clojure-programmers-part-1/">monads</a>.  Yikes!
  I've tried before, but have never seen a practical use for them.  As
  far as I understand so far, they should be very good for storing the
  state (<i>i.e.</i> the previous \(n\) timesteps).
</p>
<p>
  A simpler solution might be just to use lazy sequences.  There's not
  much to such a solution, so I might just implement it first and then
  try to replicate it with monads.  In this solution, the previous \(n\)
  timesteps are simply the last \(n\) elements of the lazy sequence.
  Getting those elements might be tough to do in constant time, but I
  have a feeling it's possible.
</p>
<p>
  On the debugging front, there shouldn't be too much complexity: it
  should just be a combination of <code>try</code>, <code>catch</code>, and <code>throw</code>.
  There's also <code>clojure.stacktrace</code> if I want to get even fancier.
</p>
<p>
  As far as tracing goes, I might have a look at <code>tools.trace</code> to see
  if there's anything interesting there that I can use.  I think that
  monads might provide another way of doing the same thing.  We'll see
  which is simpler.  It might also be nice to use <a href="http://incanter.org">incanter</a> to display
  the differences between two (or more) different functions.
</p>
<p>
  On to the coding!
</p>


</div>
</div>

</div>

<div class="inlinefooter">

<span class="pagedate">
Posted <span class="date">Sat Nov 12 09:27:15 2011</span>
</span>


<span class="tags">
Tags:

<a href="../../../tags/clojure/" rel="tag">clojure</a>

<a href="../../../tags/programming-challenge/" rel="tag">programming-challenge</a>

<a href="../../../tags/time-series/" rel="tag">time-series</a>

</span>








</div>

</div>
<div class="inlinepage">

<div class="inlineheader">

<span class="header">

<a href="../../../posts/time-series-2/">time-series-2</a>

</span>
</div>

<div class="inlinecontent">
<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">What we have so far </h2>
<div class="outline-text-2" id="text-1">


<p>
  Well, yesterday was either a very productive day or a very lucky day
  for me.  I read up on monads &ndash; I found that <a href="http://onclojure.com/2009/03/05/a-monad-tutorial-for-clojure-programmers-part-1/">khinsen's tutorials</a> and
  <a href="http://intensivesystems.s3-website-us-east-1.amazonaws.com/tutorials/monads_101.html">Jim Duey's tutorials</a> complemented each other nicely.  Then I went
  for a long run (about 18 miles I think) and let the ideas sink in.
  When I got home, I found <code>state-m</code> and <code>m-seq</code> and the job was
  almost done.
</p>
<p>
  Just as a reminder, <a href="http://chrismgray.github.com/posts/time-series-1">yesterday's task</a> was to build a time-series
  framework where a function \(f\) accepts the previous \(n\) outputs of
  \(f\) as input to generate a new output.  Here is my solution, edited
  for clarity (the actual solution is in a <a href="http://github.com/chrismgray/time-series">github repository</a>):
</p>



<pre class="src src-clojure">(defn time-series [f init-state n num-iterations]
 (let [call-f (fn [state]
                (let [retval (f state)
                      num (count state)
                      new-state (vec (if (= num n) (drop 1 (conj state retval)) (conj state retval)))]
                  [retval new-state]))]
   ((with-monad state-m
      (m-seq (repeat num-iterations call-f)))
    (vector init-state))))
</pre>




<p>
  As you can see, the heavy lifting is done by the <code>state</code> monad and
  by <code>m-seq</code>.  What do they do?  Well, <code>m-seq</code> can be thought of as
  taking a list of functions and calling them in order, returning a
  list of their return values.  The list of functions in this case is
  the same function (<code>call-f</code>) over and over.  All <code>call-f</code> does is
  call \(f\) and change the state.
</p>
<p>
  It might appear that <code>call-f</code> is an \(O(n)\) function.  After all, we
  call <code>count</code> on the state, which is a vector of at most \(n\)
  elements.  However, almost all the behind-the-scenes data structures
  that Clojure uses (including the vector data structure) are
  guaranteed to have \(O(1)\) performance for calling <code>count</code>.  So
  that's nice, and <code>call-f</code> has the performance characteristics that I
  desired.
</p>
</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">Monads </h2>
<div class="outline-text-2" id="text-2">


<p>
  They're still a slightly confusing and magical-seeming thing to me,
  but monads have some obvious utility.  I guess the way to think
  about them is that if you put your input and output in a common
  format, then they aid you in stringing functions together very
  easily.  I used them in this case to encapsulate state, and that is
  probably the most common use of them in Clojure (judging by the
  number of state functions in the Clojure monads library).  However,
  I think I should probably try to understand all the monads in the
  library and know how to combine them.
</p>
<p>
  I could have written the function above without monads, but the code
  would not have been nearly as concise, and there probably would have
  been many more edge-cases to consider.
</p>
</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3">The rest </h2>
<div class="outline-text-2" id="text-3">


<p>
  I also wrote some stuff to make debugging easier, and used incanter
  to compare multiple time series.  However, neither required me to
  bend my brain as much as monads, so I won't talk about them very
  much.  In fact, not at all, because that is the end of my post.
</p>


</div>
</div>

</div>

<div class="inlinefooter">

<span class="pagedate">
Posted <span class="date">Sun Nov 13 07:12:16 2011</span>
</span>


<span class="tags">
Tags:

<a href="../../../tags/clojure/" rel="tag">clojure</a>

<a href="../../../tags/programming-challenge/" rel="tag">programming-challenge</a>

<a href="../../../tags/time-series/" rel="tag">time-series</a>

</span>








</div>

</div>
<div class="inlinepage">

<div class="inlineheader">

<span class="header">

<a href="../../../posts/time-series-2/interest-rates.png">interest-rates.png</a>

</span>
</div>

<div class="inlinecontent">

</div>

<div class="inlinefooter">

<span class="pagedate">
Posted <span class="date">Sun Nov 13 07:37:33 2011</span>
</span>









</div>

</div>
<div class="inlinepage">

<div class="inlineheader">

<span class="header">

<a href="../../../posts/hiking/at-01/">at-01</a>

</span>
</div>

<div class="inlinecontent">
<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">Starting on the Appalachian Trail </h2>
<div class="outline-text-2" id="text-1">


<p>
  This is my first post about hiking, so I think it should be about my
  first days really hiking.  That would be July 1 and 2, 2010.  It
  already seems like an eternity ago, so much has happened since
  then.
</p>
</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">July 1 </h2>
<div class="outline-text-2" id="text-2">


<p>
  I had been at a conference in Quebec City in the days leading up to
  July 1.  It had gone well and I had given a talk that I thought was
  pretty well-received.  But more important for me on that day was
  that I had gone to <a href="http://mec.ca">MEC</a> and bought a bunch of backpacking gear.  In
  fact, I had mailed all my possessions home from Germany to Calgary
  the week before, so I was really planning to live on the trail.  I
  had no alternative.
</p>
<p>
  I shaved one last time before my trip, took my new gear, and walked
  to the rental-car agency.  I had booked a car the day before and
  knew it would be open, even though it was Canada Day.  The drive
  from Quebec to Maine was long and pretty boring.  The only
  slightly-eventful thing that happened was that the border guards
  really gave me a hard time, eventually saying something like "Well,
  we have to let him in, he's a citizen."  I guess they don't have
  much to do at that particular crossing, so they make the most of it
  when they get someone with even a slightly strange story.
</p>
<p>
  I arrived in Bangor, Maine and needed to do some food shopping.  I
  knew that I had the dreaded 100-mile wilderness ahead of me, meaning
  that I might not get to a store for 10 days.  The stuff I bought
  then seems rather comical now.  I had a pound of rice and four or
  five Indian meals that were not dehydrated.  Also a full jar of
  peanut butter and a full jar of jelly.  And two different kinds of
  non-dehydrated hummus.  I'm pretty sure it all fit into my
  food bag eventually, but it took some doing.
</p>
<p>
  I returned the car at the airport and then took the airport bus from
  the airport to the bus terminal.  It turned out that the bus
  terminal was walking distance from the rental-car agency, but I
  didn't find that out until I was already on the bus.
</p>
<p>
  I got to the bus terminal and asked for a ticket to Millinocket.  It
  turned out that I wasn't the first to do that on that day: two other
  people were already there that were going to the trailhead.  They
  would become known to me as Picker and Grinner, and I would walk
  with them for about 1000 miles.  They obviously knew what they were
  doing.  They had sent their food ahead to the Inn at Millinocket and
  had booked a ride there.  Grinner had also already hiked the trail,
  so I was sure that I was safe tagging along with them.
</p>
<p>
  At the inn, I met a couple more people that were starting the same
  day as me: Oblio and his dad.  We had a beer at the bar down the
  street and discussed the trail ahead.
</p>
</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3">July 2 </h2>
<div class="outline-text-2" id="text-3">


<p>
  After a night of pretty poor sleep (I was excited and there were
  snorers), we got up bright and early at 5:30 the next morning.  The
  inn came with a deal that you get breakfast at the diner, so I met
  up with Oblio and his dad, and we came up with trail names for
  ourselves. Since I had been doing my postdoc in Computational
  Geometry just before the trail, I became known as Dr. Geo.  Oblio's
  dad was in marketing, and assured me that this was a fine name.
</p>
<p>
  We piled into the innkeeper's truck and headed for the trail.  The
  first task of a southbound AT thru-hike is to climb Mount Katahdin.
  In fact, the climb doesn't even count, because the trail starts at
  the top.  Since we would be coming back, we left our full packs at
  the Baxter Park ranger station, and took the loaner day-packs that
  they provide.  That would be the only time that I hiked without my
  full pack over the next 4500 miles.
</p>
<p>
  It was a good thing that we had light packs, because Katahdin is a
  monster.  It is probably the most technical climbing on the trail,
  requiring you to pull yourself up with your hands at many points.
  However, the <a href="https://picasaweb.google.com/lh/photo/xaCB5S_gJwWabCsdMwPVU3IQdffm0dM4kWIdDklkn2s?feat=directlink">views</a> are great.  At some points, you <a href="https://picasaweb.google.com/lh/photo/om0LnphpOAtHNxIX9QwkqHIQdffm0dM4kWIdDklkn2s?feat=directlink">feel</a> like you are
  in an <a href="https://picasaweb.google.com/lh/photo/8rHwtx0OcApK-34CYXmkM3IQdffm0dM4kWIdDklkn2s?feat=directlink">airplane</a>, you can see so far.  There are even great <a href="https://picasaweb.google.com/lh/photo/ig4QqEE10V3TTXk9BfL9TXIQdffm0dM4kWIdDklkn2s?feat=directlink">waterfalls</a>
  near the base.  I know some people bathed in the pools beneath the
  falls, but the water was far too cold for me.  However, I did get my
  <a href="https://picasaweb.google.com/lh/photo/betCZRWpaGuJGmFtjulKJnIQdffm0dM4kWIdDklkn2s?feat=directlink">picture</a> taken at the summit so that I could prove that I had started
  the trail.
</p>
<p>
  We started our hike from the summit back down the mountain.  It was
  even harder going down than going up.  When we got to the bottom,
  everyone was pretty tired.  Especially for the first day of hiking,
  Katahdin is really hard.  We made our camp at Baxter Park.  Of
  course, I was very poorly organized and hadn't realized that you
  must book a campsite there, so I shared with Oblio and his dad.
</p>
<p>
  It was a night of firsts for me.  I hadn't lit my stove before.  It
  didn't want to work with my flint, so I had to borrow a lighter.  I
  hadn't used a water filter before, so I needed to do that for the
  first time as well.  Cooking outside was also a new experience, and
  I undercooked the rice pretty woefully.  But after a hard day of
  hiking, any warm food is pretty good.  After that, I set up my
  brand-new hammock for the first time and climbed into my brand-new
  sleeping bag.  The hammock sagged so much that my bum almost touched
  the ground, but I didn't care &ndash; I was in bed and my journey had
  started.
</p>


</div>
</div>

</div>

<div class="inlinefooter">

<span class="pagedate">
Posted <span class="date">Sun Nov 13 08:57:32 2011</span>
</span>


<span class="tags">
Tags:

<a href="../../../tags/AT/" rel="tag">AT</a>

<a href="../../../tags/hiking/" rel="tag">hiking</a>

</span>








</div>

</div>
<div class="inlinepage">

<div class="inlineheader">

<span class="header">

<a href="../../../posts/scattered/">scattered</a>

</span>
</div>

<div class="inlinecontent">
<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">Scattered </h2>
<div class="outline-text-2" id="text-1">


<p>
  I am doing a bunch of things today, all fairly small.  I think it's
  because I finished working on the time series framework yesterday,
  so I'm kind of at loose ends.
</p>
</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">New programming project </h2>
<div class="outline-text-2" id="text-2">


<p>
  One thing that I would like to do is to take all the messages that I
  sent with my <a href="http://findmespot.com">SPOT</a> device while hiking and make a small animation of
  them on Google Maps.  This would be another use of Clojurescript.
  My previous project &ndash; a Clojurescript program for computing the
  Voronoi Diagram of a set of points input by a user &ndash; is a bit
  stalled at the moment, so it's good to have something else to work
  on.  Also, I feel like adding points to a Google Map is something
  that Clojurescript is better suited to, rather than the fiddly
  numeric stuff that I was trying to make it do.  I will come back to
  the Voronoi Diagram at some point (hopefully fairly soon), but I am
  putting it on the back burner for the moment.
</p>
<p>
  So far, I see two major tasks:
</p>

</div>

<div id="outline-container-2-1" class="outline-3">
<h3 id="sec-2-1">Getting the coordinates and times of the SPOT messages </h3>
<div class="outline-text-3" id="text-2-1">


<p>
   Every SPOT message is an email that contains the coordinates of
   where and when the message was sent.  Parsing the email can be done
   offline, so I will probably just use Clojure for that.
</p>
</div>

</div>

<div id="outline-container-2-2" class="outline-3">
<h3 id="sec-2-2">Putting them on the Google Map </h3>
<div class="outline-text-3" id="text-2-2">


<p>
   The <a href="http://code.google.com/apis/maps/documentation/javascript/overlays.html#Markers">API</a> for using Google Maps appears to be easy to use and
   well-thought-out.  There's even a way to drop the markers at
   different intervals &ndash; just what I want to do.
</p>
</div>
</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3">Notmuch </h2>
<div class="outline-text-2" id="text-3">


<p>
  I am also playing with the <a href="http://notmuch.org">notmuch</a> email client.  So far I quite
  like it.  It's a heck of a lot faster than my previous mail client,
  mainly because it doesn't do as much.  Like gmail, it is optimized
  towards two operations: searching and tagging.  I never really used
  tags in gmail, because doing so involves clicking around, but it's
  much faster in notmuch.  So far, this seems like the big advantage
  for notmuch.
</p>
</div>

</div>

<div id="outline-container-4" class="outline-2">
<h2 id="sec-4">Git annex </h2>
<div class="outline-text-2" id="text-4">


<p>
  In an effort to use all the software written by <a href="http://joey.kitenet.net/">Joey Hess</a> (not
  really, but it seems like it), I am also trying out <a href="http://git-annex.branchable.com/">git annex</a>.
</p>
<p>
  So far, I have come up with one really compelling use case --
  syncing podcasts to my mp3 player.  My mp3 player has the problem
  that it will delete all the files on it at random times.  Thus, I
  need to keep a backup of all the files on it on my computer.
  However, when I am done listening to a podcast, I like to remove the
  file.  Hopefully, I will be able to sync the files that I remove
  myself (that is, remove them from the laptop), but not the files
  that get removed by the stupid thing crashing.
</p>
<p>
  Another thing that I would like to do is put my music and video
  collections in git annex.  I'm not sure that anything special would
  come from doing that, but it seems nice to have these things in
  version control.
</p>


</div>
</div>

</div>

<div class="inlinefooter">

<span class="pagedate">
Posted <span class="date">Mon Nov 14 10:11:23 2011</span>
</span>


<span class="tags">
Tags:

<a href="../../../tags/clojure/" rel="tag">clojure</a>

<a href="../../../tags/clojurescript/" rel="tag">clojurescript</a>

<a href="../../../tags/email/" rel="tag">email</a>

<a href="../../../tags/git/" rel="tag">git</a>

<a href="../../../tags/git-annex/" rel="tag">git-annex</a>

<a href="../../../tags/notmuch/" rel="tag">notmuch</a>

<a href="../../../tags/spot/" rel="tag">spot</a>

</span>








</div>

</div>
<div class="inlinepage">

<div class="inlineheader">

<span class="header">

<a href="../../../posts/luhnybin/">luhnybin</a>

</span>
</div>

<div class="inlinecontent">
<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">Another programming challenge </h2>
<div class="outline-text-2" id="text-1">


<p>
  I woke up with another programming challenge in my inbox this
  morning.  This one is from <a href="http://squareup.com">Square</a>.  They are a company that gives
  you a little device so that you can accept credit cards using a
  smart phone.  The challenge is <a href="http://corner.squareup.com/2011/11/luhny-bin.html">here</a> &ndash; basically it's about removing
  credit cards numbers from logs.  There are some details about what
  constitutes a credit card number, and how they are distinct from
  other numbers.  I won't repeat that here, but you should read it to
  understand what's coming up.
</p>
<p>
  As usual, I implemented my solution in Clojure.  I particularly
  liked the function I called <code>luhn-check</code>.  Here it is:
</p>



<pre class="src src-clojure">(defn luhn-check
  <span>"Takes a sequence of digits and determines whether they pass the Luhn test.</span>
<span>   The sequence must be in order from right to left."</span>
  [digits]
  (-&gt;&gt; digits
       (partition 2 2 (repeat 0))
       (mapcat #(vector (first %) (* 2 (second %))))
       (reduce #(+ %1 (int (/ %2 10)) (int (mod %2 10))))
       (#(mod % 10))
       (= 0)))
</pre>




<p>
  I think this is a good illustration of the <code>-&gt;&gt;</code> operator in
  Clojure, which is also called the "thrush" operator.  Basically,
  this operator can be thought of as taking the result from one
  expression and putting it at the end of the next expression.
</p>
<p>
  In this case, we start out with a list of digits.  We then partition
  them into pairs, padding with a zero if necessary.  We then take the
  pairs and double the second number in the pair, concatenating all
  the pairs back into a single list.  We then sum up all the digits in
  the list, using the <code>reduce</code> function.  This leaves us with a
  number.  We get its value \(\mod 10\) and test whether it is equal
  to zero.  If it is, we return <code>true</code>, otherwise we return <code>false</code>.
</p>
<p>
  All of this could be written with nested expressions (and the thrush
  operator is simply a macro that rewrites what you see as nested
  expressions), but I think the way it is written nicely shows what
  the data is doing in the function.
</p>
<p>
  Anyway, I don't know if this solution will get me a job, but it was
  a bit of fun coding and didn't take too long.
</p>


</div>
</div>

</div>

<div class="inlinefooter">

<span class="pagedate">
Posted <span class="date">Tue Nov 15 13:22:19 2011</span>
</span>


<span class="tags">
Tags:

<a href="../../../tags/clojure/" rel="tag">clojure</a>

<a href="../../../tags/programming-challenge/" rel="tag">programming-challenge</a>

<a href="../../../tags/thrush/" rel="tag">thrush</a>

</span>








</div>

</div>
<div class="inlinepage">

<div class="inlineheader">

<span class="header">

<a href="../../../posts/spot-tracks/">spot-tracks</a>

</span>
</div>

<div class="inlinecontent">
<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">Where I was </h2>
<div class="outline-text-2" id="text-1">


<p>
  I finally have a Clojurescript application that works basically the
  way I want it to.  It shows a Google Map of the US onto which is
  added a series of markers.  The markers are placed at the positions
  that I sent a SPOT message on one of my hikes.  They are dropped at
  intervals that correspond to the intervals between me sending them
  out.  The whole thing takes a minute to watch.  There are a couple
  of parts where it seems like nothing is happening &ndash; those are
  winter when I wasn't hiking and a period of time between when the
  SPOT stopped working and when I got the replacement.  The app is
  <a href="http://chrismgray.github.com/posts/spot-tracks/view.html">here</a>.  The <a href="https://github.com/chrismgray/spot-tracks">source code</a> is on my github page, but it is mostly
  unedifying. 
</p>


</div>
</div>

</div>

<div class="inlinefooter">

<span class="pagedate">
Posted <span class="date">Wed Nov 16 09:20:05 2011</span>
</span>


<span class="tags">
Tags:

<a href="../../../tags/clojurescript/" rel="tag">clojurescript</a>

<a href="../../../tags/hiking/" rel="tag">hiking</a>

<a href="../../../tags/spot/" rel="tag">spot</a>

</span>








</div>

</div>
<div class="inlinepage">

<div class="inlineheader">

<span class="header">

<a href="../../../posts/hiking/100-mile-wilderness/">100-mile-wilderness</a>

</span>
</div>

<div class="inlinecontent">
<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">The 100-Mile Wilderness </h2>
<div class="outline-text-2" id="text-1">


<p>
  Right after the huge challenge of climbing Mount Katahdin,
  southbound hikers on the Appalachian Trail must deal with about 100
  miles without any stores or conveniences.  As I mentioned in my <a href="http://chrismgray.github.com/hiking/at-01.html">last hiking post</a>, this means big and heavy packs for the hikers.  Also,
  my lack of experience meant that I was carrying things that I didn't
  really need, so when I set out on the first morning I was really
  loaded down.
</p>
<p>
  I got out of camp a bit later than Oblio and his dad, and walked out
  of Baxter Park.  I don't remember too much about the first day.
  There was a decent-sized river that we walked beside for a while and
  I thought I saw a beaver or some other water animal, but I couldn't
  get close enough to get a picture.
</p>
<p>
  We officially entered the 100-mile wilderness when we passed this
  <a href="https://picasaweb.google.com/lh/photo/PZEL0R-SlLrRdqSIKN-5UHIQdffm0dM4kWIdDklkn2s?feat=directlink">sign</a>, and didn't walk more than 100 yards before we saw some moose
  dung.  That seemed like a good sign to me.  Where there's dung,
  there's animals.  A couple of miles later, it was time to call it a
  day at the first shelter on the AT.  The log in the shelter warned
  of rodents, so I immediately decided not to sleep in it.  We also
  met some northbounders (nobos in AT parlance).  At that time, I
  viewed them as something like heroes.  These were people that were
  just 10 or 12 miles from finishing the same hike that I was on.
  Wow!  They were so close to the finish line that they were going
  on.  They would probably do half the miles that we had done in the
  entire day in that evening.
</p>
<p>
  The next day, I got up fairly early.  There was a small hill, and
  then the trail goes around a lake.  The trail was mucky and the
  boards (called "bog boards") that were placed for people to walk on
  were disintegrating.  Finally we got away from the lake and the
  trail conditions became a bit better.  We crossed <a href="https://picasaweb.google.com/lh/photo/mv9x4neQvulRVGCYQzUTNHIQdffm0dM4kWIdDklkn2s?feat=directlink">this bridge</a> and
  got to <a href="https://picasaweb.google.com/lh/photo/D2nJ4h_FzubDnoCOSgy6u3IQdffm0dM4kWIdDklkn2s?feat=directlink">the Rainbow Stream shelter</a> (I see that Picker and Grinner got
  there before me).  I took a small nap on the pine needles behind the
  shelter and cleaned off my legs in the pool below <a href="https://picasaweb.google.com/lh/photo/GFBLdt6vU4QgYQIJRgkYinIQdffm0dM4kWIdDklkn2s?feat=directlink">this waterfall</a>.
  Finally, I started walking again.  About two miles later, I stumbled
  and decided that I must be getting tired and that I should look for
  a place to camp.  Luckily, I found that Oblio and his dad camped
  just a few hundred yards later, so I stopped there for the night.
</p>
<p>
  I don't really remember much about the next couple of days.  On one
  of them, I got bitten by a mosquito on the lip, and my lip swelled
  to twice its normal size.  There was also a river that was reputed
  to have good swimming, but the water was quite warm because it is
  lake-fed.  I hiked a couple of miles past it and camped at the lake
  that was the source.  A float plane landed on the lake while I was
  there, but it was all the way on the other side of the lake, so it
  wasn't too bothersome.  I had a quiet night, but Picker and Grinner
  didn't; there was a group of Quebecois Girl Scouts at the campsite
  next to the river and they stayed up late chattering.
</p>
<p>
  Picker and Grinner passed me early the next morning in what would
  become a pattern.  The two of them were much more efficient than me
  in the morning, especially while I was still cooking oatmeal for
  breakfast.  That day was the first where I had a big choice to
  make.  Would I hike fast and get over White Cap or would I stop just
  before it?  I didn't have a data book at that point, so I had no
  real way of knowing how hard White Cap would be, but people had been
  hyping it for a while as a pretty hard climb.
</p>

</div>

<div id="outline-container-1-1" class="outline-3">
<h3 id="sec-1-1">White Cap </h3>
<div class="outline-text-3" id="text-1-1">


<p>
   When I got to the shelter just before White Cap, I made the choice
   to go on.  The next shelter was just two or three miles away and it
   wasn't yet late.  This turned out to be a slight mistake.  The
   climb up White Cap wasn't too bad (though it would turn out to be
   too much for Oblio's dad &ndash; he had to be helped down the mountain
   and he and Oblio called it quits there), but there were about three
   more mountains to go over before I got to the campsite.  It was in
   that moment that I first learned the value of having a data book,
   though I don't think it quite sunk in until I got through with
   Maine.
</p>
<p>
   Another reason that hiking over White Cap that evening was a
   mistake was that there was a large group of Quebecois boys at the
   campsite and they kept making noise until about one the next
   morning.  However, I did get woken up by a moose, so maybe that's a
   wash.
</p>
</div>

</div>

<div id="outline-container-1-2" class="outline-3">
<h3 id="sec-1-2">Chairback </h3>
<div class="outline-text-3" id="text-1-2">


<p>
   The next day was probably my shortest full day of hiking on the
   trail.  I was clearly tired from my adventure (and the noise made
   by the boys) the night before and I just walked pretty slow in the
   morning.  I also had not counted on the climb up the next mountain
   &ndash; Chairback Mountain &ndash; being <b>straight up</b>.  People in Maine have
   clearly not heard of switchbacks, because there were none.  When I
   was getting very close to the shelter at Chairback Mountain, there
   was a large climb on talus (big rocks that are just sitting on each
   other with nothing to keep them from falling).  That's also not my
   favorite thing.
</p>
<p>
   I had told myself that if I didn't get to the shelter by 3, then I
   would stay there.  I met an older man that was already staying at
   the shelter and asked him what time it was &ndash; he said that it was
   after three, and I was quite relieved.  We talked for a while --
   his trail name was Frosty and had been on the trail for a day
   longer than me.  I was a bit proud of myself for passing someone
   already, but Frosty had taken a bit of a side trip.
</p>
<p>
   I went to set up my hammock, and while I was doing that, I heard
   Picker and Grinner arrive.  They had stayed at the shelter before
   White Cap and we had not seen each other that day.  She asked
   Frosty if he'd seen me, and when he pointed me out, Grinner came
   running over and gave me a big hug.  That was a huge help for me to
   have someone glad to see me at the end of what was my first really
   hard day on the trail.  It was just one of the reasons that I give
   a lot of credit for my success on the trail to Picker and Grinner.  
</p>
</div>

</div>

<div id="outline-container-1-3" class="outline-3">
<h3 id="sec-1-3">The rest </h3>
<div class="outline-text-3" id="text-1-3">


<p>
   I stayed with Picker, Grinner, and Frosty for the rest of the
   100-mile wilderness.  There were more mountains and campsites, but
   nothing that stands out too vividly in my memory (though this
   <a href="https://picasaweb.google.com/lh/photo/bUFnjNFdRFDtm2PT7cNbdnIQdffm0dM4kWIdDklkn2s?feat=directlink">waterfall</a> is pretty nice).  Frosty turned out to be a great hiking
   companion as well.  His pack was lighter than everyone else's, so
   he had no problems keeping up, and he has a great sense of humor.
   He had planned a lot better than I had, and finished all the food
   in his pack by breakfast on the final day before we got to Monson.
   I think he had to eat turkey stuffing because he had eaten some
   breakfasts for supper on an earlier night.  Luckily, we were only a
   few miles from the road, so no one starved.  (That being said,
   everyone was talking about food at that point &ndash; we were getting
   pretty hungry and all of us lost quite a bit of weight.)
</p>
</div>

</div>

<div id="outline-container-1-4" class="outline-3">
<h3 id="sec-1-4">Monson </h3>
<div class="outline-text-3" id="text-1-4">


<p>
   We called Shaw's in Monson from the road and they came and picked
   us up.  It was great to get out of the wilderness.  The people at
   Shaw's were so nice and especially great at dealing with tired
   hikers.  They quickly got us into the showers and gave us a nice
   all-you-can-eat pancake breakfast.
</p>
<p>
   I think I won't get into all that happened in Monson today, but
   leave that until the next installment of the saga, where we'll meet
   Wounded Knee.  Stay tuned.
</p>


</div>
</div>
</div>

</div>

<div class="inlinefooter">

<span class="pagedate">
Posted <span class="date">Sat Nov 19 13:34:35 2011</span>
</span>


<span class="tags">
Tags:

<a href="../../../tags/AT/" rel="tag">at</a>

<a href="../../../tags/hiking/" rel="tag">hiking</a>

</span>








</div>

</div>


</div>

</div>

<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'hikingandcoding'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>


<div id="footer" class="pagefooter">

<div id="pageinfo">









<div class="pagedate">
Last edited <span class="date">Thu Nov 10 20:38:47 2011</span>
<!-- Created <span class="date">Thu Nov 10 19:21:15 2011</span> -->
</div>

</div>


<!-- from Hiking and Coding -->
</div>

</div>

</body>
</html>
